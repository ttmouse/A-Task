# A-Task 使用指南

## 🚀 快速开始

A-Task 是一个浏览器插件，帮助您在多个 AI 网站（Gemini、ChatGPT 等）上管理和自动化任务队列。

### 基础使用

1. 点击插件图标打开任务面板
2. 输入任务内容
3. 选择目标网站（Gemini / ChatGPT）
4. 点击"添加任务"
5. 系统会自动执行队列中的任务

---

## ✨ 多步骤任务

**最重要的功能！** 在一个任务中包含多个步骤，让 AI 依次完成。

### 如何使用？

在任务内容中使用 **8个减号** 分隔不同的步骤：

```
第一步：生成一个蓝色天空的图片
--------
第二步：在天空中添加一朵白云
--------
第三步：让白云变成粉红色
```

### 执行规则

✅ **依次执行**：完成第一步后，自动执行第二步
✅ **等待完成**：每步都会等待 AI 完成响应
✅ **失败停止**：如果某步失败，立即停止后续步骤
✅ **自动清理**：步骤间自动清理输入框

### 实用场景

**图片迭代生成**
```
生成一个森林的图片
--------
在森林中添加一只小鹿
--------
调整为黄昏的光线
```

**对话上下文延续**
```
请帮我写一个关于春天的诗
--------
将这首诗翻译成英文
--------
总结这首诗的主题
```

**代码开发迭代**
```
用 Python 写一个快速排序函数
--------
优化这个函数的性能
--------
添加单元测试
```

---

## 📋 任务管理

### 任务状态

- 🔵 **待执行** - 在队列中等待
- 🟡 **执行中** - 正在处理
- 🟢 **已完成** - 成功完成
- 🔴 **失败** - 执行出错

### 多步骤进度

对于多步骤任务，会显示当前进度：

```
⏳ 执行中 (2/3)
```

表示总共 3 步，当前执行第 2 步。

---

## ⚠️ 注意事项

### 分割线格式

- ✅ 必须是 **8个减号**：`--------`
- ❌ 多一个或少一个都无效
- ✅ 分割线前后的空格会自动去除

### 最少步骤数

- 至少需要 **2个有效步骤**
- 少于 2 步会被当作普通单步骤任务

### 错误处理

- 任何步骤失败会**立即停止**后续步骤
- 失败信息会显示在任务列表中
- 不会自动重试失败的步骤

---

## ❓ 常见问题

### Q: 多步骤任务如何知道已完成？

A: 系统会监控 AI 网站的按钮状态和响应变化，当检测到"停止生成"按钮消失，且发送按钮可用时，判定为完成。

### Q: 可以暂停或取消任务吗？

A: 当前版本暂不支持暂停，但您可以手动点击 AI 网站的"停止生成"按钮来中断。

### Q: 支持哪些 AI 网站？

A: 目前支持：
- ✅ Gemini (已测试)
- ✅ ChatGPT (适配器已准备，需要验证选择器)

### Q: 任务会保存吗？

A: 是的，所有任务都会保存在浏览器本地存储中，关闭浏览器后也不会丢失。

### Q: 多步骤任务的中间结果会保存吗？

A: 系统会记录每个步骤的状态（待执行/执行中/已完成/失败），但不会保存 AI 的响应内容。

---

## 🎯 使用技巧

### 技巧 1: 步骤内容要清晰

**不好的例子：**
```
生成图片
--------
改一下
```

**好的例子：**
```
生成一个蓝色天空的图片
--------
在这个天空中添加一朵白云
```

### 技巧 2: 避免步骤间依赖过强

如果后面的步骤强依赖前面的具体输出，可能会出现问题。尽量让每个步骤都能独立理解。

**风险较高：**
```
生成一个随机数
--------
将这个数字乘以 2
```
（AI 可能不记得上一步的具体数字）

**更安全：**
```
生成一个 1-100 的随机数，并告诉我结果
--------
如果刚才的数字大于 50，生成一张庆祝图片；否则生成一张鼓励图片
```

### 技巧 3: 合理控制步骤数量

- 建议 **2-5 个步骤**
- 太多步骤可能导致等待时间过长
- 如果需要很多步骤，可以拆分成多个任务

---

## 🔗 更多帮助

如果遇到问题或需要更详细的文档，请查看：

- 📖 [完整使用文档](../docs/MULTI_STEP_TASKS.md)
- 💻 [代码示例](../examples/multi-step-usage.ts)
- 🐛 [反馈问题](https://github.com/your-repo/issues)

---

<div style="text-align: center; margin-top: 40px; color: #9CA3AF; font-size: 14px;">
A-Task v1.0.0 | 让 AI 任务管理更简单
</div>
